{"version":3,"sources":["webpack:///task.min.js","webpack:///webpack/bootstrap 75ae9494f171d7a5d159","webpack:///./src/client/index.js","webpack:///./src/WorkerManager.js","webpack:///./src/Worker.js","webpack:///./src/client/WebWorkerProxy.js","webpack:///./src/client/CompatibilityWorkerProxy.js"],"names":["task","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","WorkerProxy","_WorkerManager","_WorkerManager2","defaults","maxWorkers","navigator","hardwareConcurrency","Worker","window","URL","webkitURL","$config","WorkerProxyOverride","config","Object","keys","forEach","key","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","prototype","_Worker","_Worker2","WorkerManager","_this","this","_next","_queue","worker","_getWorker","setTimeout","shift","run","_WorkerProxy","_maxWorkers","_idleTimeout","idleTimeout","_idleCheckInterval","idleCheckInterval","_workers","_onWorkerTaskComplete","bind","_flushIdleWorkers","value","_idleCheckIntervalID","setInterval","arguments","Error","Array","slice","Promise","resolve","reject","push","func","from","function","clearInterval","terminate","filter","tasks","Date","lastTaskTimestamp","idleWorkers","_createWorker","onTaskComplete","addEventListener","_onWorkerMessage","_onTaskComplete","Math","random","exists","some","_generateTaskID","message","taskIndex","index","result","splice","$options","String","postMessage","transferables","WebWorkerProxy","WORKER_SOURCE","_onMessage","event","data","callbacks","_listeners","callback","_worker","_functionToObjectURL","blob","stringFunc","toString","substring","indexOf","lastIndexOf","Blob","type","error","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","append","getBlob","createObjectURL","options","_toConsumableArray","arr","isArray","arr2","CompatibilityWorkerProxy","_setTimeoutID","_this2","args","match","sort","a","b","parseInt","map","functionBody","argNames","split","Function","apply","concat","undefined","clearTimeout"],"mappings":"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","file":"task.min.js","sourcesContent":["var task =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _WorkerManager = __webpack_require__(1);\n\t\n\tvar _WorkerManager2 = _interopRequireDefault(_WorkerManager);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar defaults = {\n\t\tmaxWorkers: navigator.hardwareConcurrency\n\t};\n\t\n\tvar WorkerProxy;\n\tif (typeof Worker != 'undefined' && (window.URL || window.webkitURL)) {\n\t\tWorkerProxy = __webpack_require__(3);\n\t} else {\n\t\tWorkerProxy = __webpack_require__(4);\n\t}\n\t\n\t// expose default instance directly\n\tmodule.exports = new _WorkerManager2['default'](defaults, WorkerProxy);\n\t\n\t// allow custom settings (task.js factory)\n\tmodule.exports.defaults = function ($config, WorkerProxyOverride) {\n\t\tvar config = {};\n\t\n\t\t// clone defaults\n\t\tObject.keys(defaults).forEach(function (key) {\n\t\t\treturn config[key] = defaults[key];\n\t\t});\n\t\n\t\t// apply user settings\n\t\tObject.keys($config).forEach(function (key) {\n\t\t\treturn config[key] = $config[key];\n\t\t});\n\t\n\t\treturn new _WorkerManager2['default'](config, WorkerProxyOverride || WorkerProxy);\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Worker = __webpack_require__(2);\n\t\n\tvar _Worker2 = _interopRequireDefault(_Worker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar WorkerManager = function () {\n\t\tfunction WorkerManager($config, WorkerProxy) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, WorkerManager);\n\t\n\t\t\tthis._next = function () {\n\t\t\t\tif (!_this._queue.length) return;\n\t\n\t\t\t\tvar worker = _this._getWorker();\n\t\n\t\t\t\tif (!worker) {\n\t\t\t\t\tsetTimeout(_this._next, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar task = _this._queue.shift();\n\t\n\t\t\t\tworker.run(task);\n\t\t\t};\n\t\n\t\t\t$config = $config || {};\n\t\n\t\t\tthis._WorkerProxy = WorkerProxy;\n\t\n\t\t\tthis._maxWorkers = $config.maxWorkers || 4;\n\t\t\tthis._idleTimeout = $config.idleTimeout === false ? false : $config.idleTimeout || 10000;\n\t\t\tthis._idleCheckInterval = $config.idleCheckInterval || 1000;\n\t\n\t\t\tthis._workers = [];\n\t\t\tthis._queue = [];\n\t\t\tthis._onWorkerTaskComplete = this._onWorkerTaskComplete.bind(this);\n\t\t\tthis._flushIdleWorkers = this._flushIdleWorkers.bind(this);\n\t\t}\n\t\n\t\t_createClass(WorkerManager, [{\n\t\t\tkey: 'run',\n\t\t\tvalue: function run(task) {\n\t\t\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID !== 'number') {\n\t\t\t\t\tthis._idleCheckIntervalID = setInterval(this._flushIdleWorkers, this._idleCheckInterval);\n\t\t\t\t}\n\t\n\t\t\t\tif (!task.arguments || typeof task.arguments.length === 'undefined') {\n\t\t\t\t\tthrow new Error('task.js: \"arguments\" is required property, and it must be an array/array-like');\n\t\t\t\t}\n\t\n\t\t\t\tif (!task['function'] && (typeof task['function'] !== 'function' || typeof task['function'] !== 'string')) {\n\t\t\t\t\tthrow new Error('task.js: \"function\" is required property, and it must be a string or a function');\n\t\t\t\t}\n\t\n\t\t\t\tif (_typeof(task.arguments) === 'object') {\n\t\t\t\t\ttask.arguments = Array.prototype.slice.call(task.arguments);\n\t\t\t\t}\n\t\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t// kind of a hack\n\t\t\t\t\ttask.resolve = resolve;\n\t\t\t\t\ttask.reject = reject;\n\t\t\t\t\tthis._queue.push(task);\n\t\t\t\t\tthis._next();\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'wrap',\n\t\t\tvalue: function wrap(func) {\n\t\t\t\treturn function () {\n\t\t\t\t\treturn this.run({\n\t\t\t\t\t\targuments: Array.from(arguments),\n\t\t\t\t\t\t'function': func\n\t\t\t\t\t});\n\t\t\t\t}.bind(this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'terminate',\n\t\t\tvalue: function terminate() {\n\t\t\t\t// kill idle timeout (if it exists)\n\t\t\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID == 'number') {\n\t\t\t\t\tclearInterval(this._idleCheckIntervalID);\n\t\t\t\t\tthis._idleCheckIntervalID = null;\n\t\t\t\t}\n\t\n\t\t\t\t// terminate all existing workers\n\t\t\t\tthis._workers.forEach(function (worker) {\n\t\t\t\t\tworker.worker.terminate();\n\t\t\t\t});\n\t\n\t\t\t\t// flush worker pool\n\t\t\t\tthis._workers = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onWorkerTaskComplete',\n\t\t\tvalue: function _onWorkerTaskComplete() {\n\t\t\t\tthis._next();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_flushIdleWorkers',\n\t\t\tvalue: function _flushIdleWorkers() {\n\t\t\t\tthis._workers = this._workers.filter(function (worker) {\n\t\t\t\t\tif (worker.tasks.length === 0 && new Date() - worker.lastTaskTimestamp > this._idleTimeout) {\n\t\t\t\t\t\tworker.worker.terminate();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_getWorker',\n\t\t\tvalue: function _getWorker() {\n\t\t\t\tvar idleWorkers = this._workers.filter(function (worker) {\n\t\t\t\t\treturn worker.tasks.length === 0;\n\t\t\t\t});\n\t\n\t\t\t\tif (idleWorkers.length) {\n\t\t\t\t\treturn idleWorkers[0];\n\t\t\t\t} else if (this._workers.length < this._maxWorkers) {\n\t\t\t\t\treturn this._createWorker();\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_createWorker',\n\t\t\tvalue: function _createWorker() {\n\t\t\t\tvar worker = new _Worker2['default']({\n\t\t\t\t\tonTaskComplete: this._onWorkerTaskComplete\n\t\t\t\t}, this._WorkerProxy);\n\t\n\t\t\t\tthis._workers.push(worker);\n\t\n\t\t\t\treturn worker;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn WorkerManager;\n\t}();\n\t\n\tmodule.exports = WorkerManager;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Worker = function () {\n\t\tfunction Worker($config, WorkerProxy) {\n\t\t\t_classCallCheck(this, Worker);\n\t\n\t\t\tthis.worker = new WorkerProxy();\n\t\t\tthis.worker.addEventListener('message', this._onWorkerMessage.bind(this));\n\t\t\tthis.tasks = [];\n\t\t\tthis.lastTaskTimestamp = null;\n\t\n\t\t\tthis._onTaskComplete = $config.onTaskComplete;\n\t\t}\n\t\n\t\t_createClass(Worker, [{\n\t\t\tkey: '_generateTaskID',\n\t\t\tvalue: function _generateTaskID() {\n\t\t\t\tvar id = Math.random(),\n\t\t\t\t    exists = false;\n\t\n\t\t\t\tthis.tasks.some(function (task) {\n\t\t\t\t\tif (task.id === true) {\n\t\t\t\t\t\texists = true;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\treturn exists ? this._generateTaskID() : id;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_onWorkerMessage',\n\t\t\tvalue: function _onWorkerMessage(message) {\n\t\t\t\tvar taskIndex = null;\n\t\n\t\t\t\tthis.tasks.some(function (task, index) {\n\t\t\t\t\tif (message.id === task.id) {\n\t\t\t\t\t\ttaskIndex = index;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tif (taskIndex !== null) {\n\t\t\t\t\tthis.tasks[taskIndex].resolve(message.result);\n\t\t\t\t\tthis._onTaskComplete(this);\n\t\t\t\t\tthis.tasks.splice(taskIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'run',\n\t\t\tvalue: function run($options) {\n\t\t\t\tvar id = this._generateTaskID();\n\t\n\t\t\t\tthis.lastTaskTimestamp = new Date();\n\t\n\t\t\t\tthis.tasks.push({\n\t\t\t\t\tid: id,\n\t\t\t\t\tresolve: $options.resolve,\n\t\t\t\t\treject: $options.reject\n\t\t\t\t});\n\t\n\t\t\t\tvar message = {\n\t\t\t\t\tid: id,\n\t\t\t\t\tfunc: String($options['function'])\n\t\t\t\t};\n\t\n\t\t\t\t// because of transferables (we want to keep this object flat)\n\t\t\t\tObject.keys($options.arguments).forEach(function (key, index) {\n\t\t\t\t\tmessage['argument' + index] = $options.arguments[index];\n\t\t\t\t});\n\t\n\t\t\t\tthis.worker.postMessage(message, $options.transferables);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Worker;\n\t}();\n\t\n\tmodule.exports = Worker;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar WebWorkerProxy = function () {\n\t\tfunction WebWorkerProxy() {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, WebWorkerProxy);\n\t\n\t\t\tthis.WORKER_SOURCE = 'function () {\\n\\t\\tonmessage = function (event) {\\n\\t\\t\\tvar message = event.data;\\n\\n\\t\\t\\tvar args = Object.keys(message).filter(function (key) {\\n\\t\\t\\t\\treturn key.match(/^argument/);\\n\\t\\t\\t}).sort(function (a, b) {\\n\\t\\t\\t\\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\\n\\t\\t\\t}).map(function (key) {\\n\\t\\t\\t\\treturn message[key];\\n\\t\\t\\t});\\n\\n\\t\\t\\tpostMessage({id: message.id, result: eval(\\'(\\' + message.func + \\')\\').apply(null, args)});\\n\\t\\t}\\n\\t}';\n\t\n\t\t\tthis._onMessage = function (event) {\n\t\t\t\tvar message = event.data;\n\t\n\t\t\t\tvar callbacks = _this._listeners.message;\n\t\t\t\tif (callbacks) {\n\t\t\t\t\tcallbacks.forEach(function (callback) {\n\t\t\t\t\t\treturn callback(message);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis._listeners = {};\n\t\t\tthis._worker = new Worker(this._functionToObjectURL(this.WORKER_SOURCE));\n\t\t\tthis._worker.addEventListener('message', this._onMessage);\n\t\t}\n\t\n\t\t_createClass(WebWorkerProxy, [{\n\t\t\tkey: '_functionToObjectURL',\n\t\t\tvalue: function _functionToObjectURL(func) {\n\t\t\t\tvar blob = void 0,\n\t\t\t\t    stringFunc = func.toString();\n\t\n\t\t\t\tstringFunc = stringFunc.substring(stringFunc.indexOf('{') + 1, stringFunc.lastIndexOf('}'));\n\t\n\t\t\t\ttry {\n\t\t\t\t\tblob = new Blob([stringFunc], { 'type': 'text/javascript' });\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// Backwards-compatibility\n\t\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\t\t\t\tblob = new BlobBuilder();\n\t\t\t\t\tblob.append(stringFunc);\n\t\t\t\t\tblob = blob.getBlob();\n\t\t\t\t}\n\t\n\t\t\t\treturn (window.URL || window.webkitURL).createObjectURL(blob);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addEventListener',\n\t\t\tvalue: function addEventListener(event, callback) {\n\t\t\t\tthis._listeners[event] = this._listeners[event] || [];\n\t\t\t\tthis._listeners[event].push(callback);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'postMessage',\n\t\t\tvalue: function postMessage(message, options) {\n\t\t\t\tthis._worker.postMessage(message, options);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'terminate',\n\t\t\tvalue: function terminate() {\n\t\t\t\tthis._worker.terminate();\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn WebWorkerProxy;\n\t}();\n\t\n\tmodule.exports = WebWorkerProxy;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar CompatibilityWorkerProxy = function () {\n\t\tfunction CompatibilityWorkerProxy() {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, CompatibilityWorkerProxy);\n\t\n\t\t\tthis._onMessage = function (event) {\n\t\t\t\tvar message = event;\n\t\n\t\t\t\tvar callbacks = _this._listeners.message;\n\t\t\t\tif (callbacks) {\n\t\t\t\t\tcallbacks.forEach(function (callback) {\n\t\t\t\t\t\treturn callback(message);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis._listeners = {};\n\t\t\tthis._setTimeoutID = null;\n\t\t}\n\t\n\t\t_createClass(CompatibilityWorkerProxy, [{\n\t\t\tkey: 'addEventListener',\n\t\t\tvalue: function addEventListener(event, callback) {\n\t\t\t\tthis._listeners[event] = this._listeners[event] || [];\n\t\t\t\tthis._listeners[event].push(callback);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'postMessage',\n\t\t\tvalue: function postMessage(message, options) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\t// toss it out of the event loop\n\t\t\t\tthis._setTimeoutID = setTimeout(function () {\n\t\t\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\t\t\treturn key.match(/^argument/);\n\t\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t\t\t}).map(function (key) {\n\t\t\t\t\t\treturn message[key];\n\t\t\t\t\t});\n\t\n\t\t\t\t\tvar functionBody = message.func.substring(message.func.indexOf('{') + 1, message.func.lastIndexOf('}')),\n\t\t\t\t\t    argNames = message.func.substring(message.func.indexOf('(') + 1, message.func.indexOf(')')).split(',');\n\t\n\t\t\t\t\t// we cant use eval\n\t\t\t\t\tvar result = new (Function.prototype.bind.apply(Function, [null].concat(_toConsumableArray(argNames), [functionBody])))().apply(undefined, _toConsumableArray(args));\n\t\n\t\t\t\t\t_this2._onMessage({ id: message.id, result: result });\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'terminate',\n\t\t\tvalue: function terminate() {\n\t\t\t\tclearTimeout(this._setTimeoutID);\n\t\t\t\tthis._setTimeoutID = null;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn CompatibilityWorkerProxy;\n\t}();\n\t\n\tmodule.exports = CompatibilityWorkerProxy;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** task.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 75ae9494f171d7a5d159\n **/","import WorkerManager from '../WorkerManager';\n\nconst defaults = {\n\tmaxWorkers: navigator.hardwareConcurrency\n};\n\nvar WorkerProxy;\nif (typeof Worker != 'undefined' && (window.URL || window.webkitURL)) {\n\tWorkerProxy = require('./WebWorkerProxy');\n} else {\n\tWorkerProxy = require('./CompatibilityWorkerProxy');\n}\n\n// expose default instance directly\nmodule.exports = new WorkerManager(defaults, WorkerProxy);\n\n// allow custom settings (task.js factory)\nmodule.exports.defaults = function ($config, WorkerProxyOverride) {\n\tlet config = {};\n\n\t// clone defaults\n\tObject.keys(defaults).forEach(key => config[key] = defaults[key]);\n\n\t// apply user settings\n\tObject.keys($config).forEach(key => config[key] = $config[key]);\n\n\treturn new WorkerManager(config, WorkerProxyOverride || WorkerProxy);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/index.js\n **/","import Worker from './Worker';\n\nclass WorkerManager {\n\tconstructor ($config, WorkerProxy) {\n\t\t$config = $config || {};\n\n\t\tthis._WorkerProxy = WorkerProxy;\n\n\t\tthis._maxWorkers = $config.maxWorkers || 4;\n\t\tthis._idleTimeout = $config.idleTimeout === false ? false : $config.idleTimeout || 10000;\n\t\tthis._idleCheckInterval = $config.idleCheckInterval || 1000;\n\n\t\tthis._workers = [];\n\t\tthis._queue = [];\n\t\tthis._onWorkerTaskComplete = this._onWorkerTaskComplete.bind(this);\n\t\tthis._flushIdleWorkers = this._flushIdleWorkers.bind(this);\n\t}\n\n\trun (task) {\n\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID !== 'number') {\n\t\t\tthis._idleCheckIntervalID = setInterval(this._flushIdleWorkers, this._idleCheckInterval);\n\t\t}\n\n\t\tif (!task.arguments || typeof task.arguments.length === 'undefined') {\n\t\t\tthrow new Error('task.js: \"arguments\" is required property, and it must be an array/array-like');\n\t\t}\n\n\t\tif (!task.function && (typeof task.function !== 'function' || typeof task.function !== 'string')) {\n\t\t\tthrow new Error('task.js: \"function\" is required property, and it must be a string or a function');\n\t\t}\n\n\t\tif (typeof task.arguments === 'object') {\n\t\t\ttask.arguments = Array.prototype.slice.call(task.arguments);\n\t\t}\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t// kind of a hack\n\t\t\ttask.resolve = resolve;\n\t\t\ttask.reject = reject;\n\t\t\tthis._queue.push(task);\n\t\t\tthis._next();\n\t\t}.bind(this));\n\t}\n\n\twrap (func) {\n\t\treturn function () {\n\t\t\treturn this.run({\n\t\t\t\targuments: Array.from(arguments),\n\t\t\t\tfunction: func\n\t\t\t});\n\t\t}.bind(this);\n\t}\n\n\tterminate () {\n\t\t// kill idle timeout (if it exists)\n\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID == 'number') {\n\t\t\tclearInterval(this._idleCheckIntervalID);\n\t\t\tthis._idleCheckIntervalID = null;\n\t\t}\n\n\t\t// terminate all existing workers\n\t\tthis._workers.forEach(function (worker) {\n\t\t\tworker.worker.terminate();\n\t\t});\n\n\t\t// flush worker pool\n\t\tthis._workers = [];\n\t}\n\n\t_next = () => {\n\t\tif (!this._queue.length) return;\n\n\t\tlet worker = this._getWorker();\n\n\t\tif (!worker) {\n\t\t\tsetTimeout(this._next, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tlet task = this._queue.shift();\n\n\t\tworker.run(task);\n\t}\n\n\t_onWorkerTaskComplete () {\n\t\tthis._next();\n\t}\n\n\t_flushIdleWorkers () {\n\t\tthis._workers = this._workers.filter(function (worker) {\n\t\t\tif (worker.tasks.length === 0 && new Date() - worker.lastTaskTimestamp > this._idleTimeout) {\n\t\t\t\tworker.worker.terminate();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, this);\n\t}\n\n\t_getWorker () {\n\t\tlet idleWorkers = this._workers.filter(worker => worker.tasks.length === 0);\n\n\t\tif (idleWorkers.length) {\n\t\t\treturn idleWorkers[0];\n\t\t} else if (this._workers.length < this._maxWorkers) {\n\t\t\treturn this._createWorker();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t_createWorker () {\n\t\tlet worker = new Worker({\n\t\t\tonTaskComplete: this._onWorkerTaskComplete\n\t\t}, this._WorkerProxy);\n\n\t\tthis._workers.push(worker);\n\n\t\treturn worker;\n\t}\n}\n\nmodule.exports = WorkerManager;\n\n\n/** WEBPACK FOOTER **\n ** ./src/WorkerManager.js\n **/","class Worker {\n\tconstructor ($config, WorkerProxy) {\n\t\tthis.worker = new WorkerProxy();\n\t\tthis.worker.addEventListener('message', this._onWorkerMessage.bind(this));\n\t\tthis.tasks = [];\n\t\tthis.lastTaskTimestamp = null;\n\n\t\tthis._onTaskComplete = $config.onTaskComplete;\n\t}\n\n\t_generateTaskID () {\n\t\tlet id = Math.random(),\n\t\t\texists = false;\n\n\t\tthis.tasks.some(function (task) {\n\t\t\tif (task.id === true) {\n\t\t\t\texists = true;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\treturn exists ? this._generateTaskID() : id;\n\t}\n\n\t_onWorkerMessage (message) {\n\t\tlet taskIndex = null;\n\n\t\tthis.tasks.some(function (task, index) {\n\t\t\tif (message.id === task.id) {\n\t\t\t\ttaskIndex = index;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tif (taskIndex !== null) {\n\t\t\tthis.tasks[taskIndex].resolve(message.result);\n\t\t\tthis._onTaskComplete(this);\n\t\t\tthis.tasks.splice(taskIndex, 1);\n\t\t}\n\t}\n\n\trun ($options) {\n\t\tlet id = this._generateTaskID();\n\n\t\tthis.lastTaskTimestamp = new Date();\n\n\t\tthis.tasks.push({\n\t\t\tid: id,\n\t\t\tresolve: $options.resolve,\n\t\t\treject: $options.reject,\n\t\t});\n\n\t\tlet message = {\n\t\t\tid: id,\n\t\t\tfunc: String($options.function)\n\t\t};\n\n\t\t// because of transferables (we want to keep this object flat)\n\t\tObject.keys($options.arguments).forEach(function (key, index) {\n\t\t\tmessage['argument' + index] = $options.arguments[index];\n\t\t});\n\n\t\tthis.worker.postMessage(message, $options.transferables);\n\t}\n}\n\nmodule.exports = Worker;\n\n\n/** WEBPACK FOOTER **\n ** ./src/Worker.js\n **/","class WebWorkerProxy {\n\tconstructor () {\n\t\tthis._listeners = {};\n\t\tthis._worker = new Worker(this._functionToObjectURL(this.WORKER_SOURCE));\n\t\tthis._worker.addEventListener('message', this._onMessage);\n\t}\n\n\tWORKER_SOURCE = `function () {\n\t\tonmessage = function (event) {\n\t\t\tvar message = event.data;\n\n\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\tpostMessage({id: message.id, result: eval('(' + message.func + ')').apply(null, args)});\n\t\t}\n\t}`;\n\n\t_functionToObjectURL (func) {\n\t\tlet blob,\n\t\t\tstringFunc = func.toString();\n\n\t\tstringFunc = stringFunc.substring(stringFunc.indexOf('{') + 1, stringFunc.lastIndexOf('}'))\n\n\t\ttry {\n\t\t\tblob = new Blob([stringFunc], { 'type' : 'text/javascript' });\n\t\t} catch (error) { // Backwards-compatibility\n\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\t\tblob = new BlobBuilder();\n\t\t\tblob.append(stringFunc);\n\t\t\tblob = blob.getBlob();\n\t\t}\n\n\t\treturn (window.URL || window.webkitURL).createObjectURL(blob);\n\t}\n\n\t_onMessage = (event) => {\n\t\tlet message = event.data;\n\n\t\tlet callbacks = this._listeners.message;\n\t\tif (callbacks) {\n\t\t\tcallbacks.forEach(callback => callback(message));\n\t\t}\n\t}\n\n\taddEventListener(event, callback) {\n\t\tthis._listeners[event] = this._listeners[event] || [];\n\t\tthis._listeners[event].push(callback);\n\t}\n\n\tpostMessage(message, options) {\n\t\tthis._worker.postMessage(message, options);\n\t}\n\n\tterminate () {\n\t\tthis._worker.terminate();\n\t}\n}\n\nmodule.exports = WebWorkerProxy;\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/WebWorkerProxy.js\n **/","class CompatibilityWorkerProxy {\n\tconstructor () {\n\t\tthis._listeners = {};\n\t\tthis._setTimeoutID = null;\n\t}\n\n\t_onMessage = (event) => {\n\t\tlet message = event;\n\n\t\tlet callbacks = this._listeners.message;\n\t\tif (callbacks) {\n\t\t\tcallbacks.forEach(callback => callback(message));\n\t\t}\n\t}\n\n\taddEventListener(event, callback) {\n\t\tthis._listeners[event] = this._listeners[event] || [];\n\t\tthis._listeners[event].push(callback);\n\t}\n\n\tpostMessage(message, options) {\n\t\t// toss it out of the event loop\n\t\tthis._setTimeoutID = setTimeout(() => {\n\t\t\tlet args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\tlet functionBody = message.func.substring(message.func.indexOf('{') + 1, message.func.lastIndexOf('}')),\n\t\t\t\targNames = message.func.substring(message.func.indexOf('(') + 1, message.func.indexOf(')')).split(',');\n\n\t\t\t// we cant use eval\n\t\t\tlet result = (new Function(...argNames, functionBody))(...args);\n\n\t\t\tthis._onMessage({id: message.id, result: result});\n\t\t}, 1);\n\t}\n\n\tterminate () {\n\t\tclearTimeout(this._setTimeoutID);\n\t\tthis._setTimeoutID = null;\n\t}\n}\n\nmodule.exports = CompatibilityWorkerProxy;\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/CompatibilityWorkerProxy.js\n **/"],"sourceRoot":""}